{% extends 'base.html' %}

{% block title %}
   My Results Insight
{% endblock %}

{% block content %}

<h1 class="px-4 pt-4 pb-2">Semester Insights</h1>

{% if processed_semester_data %}
    <table>
        <thead>
            <tr>
                <th class="px-4 pt-4 pb-1">Semester</th>
                <th class="px-4 pt-4 pb-1">GPA</th>
                <th class="px-4 pt-4 pb-1">CGPA</th>
                <th class="px-4 pt-4 pb-1">Branch GPA</th>
                <th class="px-4 pt-4 pb-1">Units Offered</th>
            </tr>
        </thead>
        <tbody>
            {% for semester, data in processed_semester_data.items %}
            <tr>
                <td class="px-4 py-1">{{ semester }}</td>
                <td class="px-4 py-1">{{ data.GPA }}</td>
                <td class="px-4 py-1">{{ data.CGPA }}</td>
                <td class="px-4 py-2">
                    <ul>
                        {% for branch, gpa in data.Branch_GPA.items %}
                        <li>{{ branch }}: {{ gpa }}</li>
                        {% endfor %}
                    </ul>
                </td>
                <td class="px-4 py-1">{{ data.Total_units }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <p>No GPA data available for display.</p>
{% endif %}

<h2 class="px-4 pt-4 pb-2">Additional Insights</h2>

{% if additional_data %}
    <div class="additional-insights">
        <h3>Branch GPA Distribution</h3>
        <ul>
            {% for branch, distribution in additional_data.branch_distribution.items %}
            <li>{{ branch }}: {{ distribution }}%</li>
            {% endfor %}
        </ul>

        <h3>Course Representation per Semester</h3>
        {% for semester, course_data in additional_data.course_representation.items %}
        <h4>{{ semester }}</h4>
        <ul>
            {% for course, frequency in course_data.items %}
            <li>{{ course }}: {{ frequency }}</li>
            {% endfor %}
        </ul>
        {% endfor %}
    </div>
{% else %}
    <p>No additional insights available for display.</p>
{% endif %}

{% endblock %}

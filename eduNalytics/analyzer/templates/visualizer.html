{% extends 'base.html' %}

{% block title %}
   Result Visualizer
{% endblock %}

{% block content %}

<div>
  <div style="display: flex; flex-wrap: wrap; width: 100vw; flex-direction: row;">
    
    {% if branch_gpa_chart_html %}
      <div style="height: 450px; width: 55vw; padding-bottom: 1rem; padding-top: 2rem;">
        <h2 style="text-align: center;" class="text-4xl">Branch GPA</h2>
        {{ branch_gpa_chart_html|safe }}
      </div>
    {% else %}
      <div style="height: 450px; width: 55vw; padding-bottom: 1rem; padding-top: 2rem;">
        <h2 style="text-align: center;" class="text-4xl">Semester Average Score</h2>
        {{ semester_avg_chart_html|safe }}
      </div>
    {% endif %}

    <div style="height: 450px; width: 45vw; padding-bottom: 1rem; padding-top: 2rem;">
      <h2 style="text-align: center;" class="text-4xl">CGPA & GPA</h2>
      {{ combined_chart_html|safe }}
    </div>
    
    <div style="height: 450px; width: 33vw; padding-bottom: 1rem; padding-top: 4.5rem;">
      <h2 style="text-align: center;" class="text-4xl">Per Level boxplot</h2>
      {{ level_boxplot_html|safe }}
    </div>

    <div style="height: 450px; width: 67vw; padding-bottom: 1rem; padding-top: 4.5rem; padding-left: 30px;">
      <h2 style="text-align: center;" class="text-4xl">Per Semester boxplot</h2>
      {{ semester_boxplot_html|safe }}
    </div>

    <div style="height: 450px; width: 60vw; padding-bottom: 1rem; padding-top: 6.7rem;">
      <h2 style="text-align: center;" class="text-4xl">Scatterplot of Course results</h2>
      {{ scatter_plot_html|safe }}
    </div>

    <div style="height: 450px; width: 40vw; padding-bottom: 1rem; padding-top: 6.7rem;">
      <h2 style="text-align: center;" class="text-4xl">Overall Boxplot</h2>
      {{ all_scores_boxplot_html|safe }}
    </div>

    {% if branch_gpa_chart_html %}
      <div style="height: 450px; width: 45vw; padding-bottom: 1rem; padding-top: 9rem;">
        <h2 style="text-align: center;" class="text-4xl">Semester Average Score</h2>
        {{ semester_avg_chart_html|safe }}
      </div>
    {% endif %}

    {% if branch_avg_chart_html %}
      <div style="height: 450px; width: 55vw; padding-bottom: 1rem; padding-top: 9rem;">
        <h2 style="text-align: center;" class="text-4xl">Branch Average Score per Semester</h2>
        {{ branch_avg_chart_html|safe }}
      </div>
    {% endif %}

    {% if overall_branch_pie_chart_html %}
      <div style="height: 650px; width: 38vw; padding-bottom: 1rem; padding-top: 11rem;">
        <h2 style="text-align: center;" class="text-4xl">Overall Branch Distribution</h2>
         {{ overall_branch_pie_chart_html|safe }}
      </div>
    {% endif %}

    {% if semester_distribution_pie_chart_html_list %}
      <div style="height: 650px; width: 62vw; padding-bottom: 1rem; padding-top: 11rem;">
        <h2 style="text-align: center;" class="text-4xl">Branch Distribution of Courses per Semester</h2>
        <div style="padding-top: 4rem;">
          <div style="display: flex; flex-wrap: wrap; justify-content: space-around;">
              {% for pie_chart_html in semester_distribution_pie_chart_html_list %}
                  <div style="flex: 0 0 calc(25% - 20px);">
                      {{ pie_chart_html|safe }}
                  </div>
              {% endfor %}
          </div>
        </div>
      </div>
    {% endif %}

    {% if branch_distribution_stacked_bar_chart_html %}
      <div style="height: 630px; width: 100vw; padding-bottom: 1rem; padding-top: 15rem;">
        <h2 style="text-align: center;" class="text-4xl">Overall Branch Distribution</h2>
         {{ branch_distribution_stacked_bar_chart_html|safe }}
      </div>
    {% endif %}

    <div style="height: 650px; width: 100vw; padding-top: 11rem; padding-right: 0.7rem;">
      <h2 style="text-align: center;" class="text-4xl">Overall Passed Branch Distribution</h2>
      {{ pass_rate_html|safe }}
    </div>
  </div>
</div>

<h1 class="pt-4 mb-2">What is this?</h1>

<aside>
  <button type="submit" id="view_analysis" class="btn btn-primary py-1 my-2" style="display: inline-block; width: 100vw;">Click here to view detailed analysis of your result</button>
  <content></content>
</aside>

<script>
  const neededData = JSON.parse('{{ needed_data|safe }}');
  console.log('Needed Data:', neededData);
</script>

{% endblock %}
